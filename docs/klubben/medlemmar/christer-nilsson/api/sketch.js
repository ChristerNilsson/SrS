// Generated by CoffeeScript 2.7.0
var process, table, td, th, tr;

table = function(s) {
  return "<table>\n" + s + "</table>";
};

td = function(s, attrs = "") {
  return `<td ${attrs}>` + s + "</td>";
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>` + s + "</tr>\n";
};

th = function(s, attrs = "") {
  return `<th ${attrs}>` + s + "</th>";
};

process = function(data_t, data_r, pid) {
  var app, center, col, färg, g, good, grå, i, j, len, len1, n, now, nu, opp, p, pi, players, r, res, s, stable;
  console.log(data_t);
  console.log(data_r);
  players = {};
  for (i = 0, len = data_t.length; i < len; i++) {
    p = data_t[i];
    pi = p.playerInfo;
    players[p.contenderId] = pi.elo.rating + ' ' + pi.lastName.toUpperCase() + ' ' + pi.firstName;
  }
  stable = "";
  stable += th("datum");
  stable += th("rond");
  stable += th("bord");
  stable += th("färg");
  stable += th("mot");
  stable += th("resultat");
  stable = tr(stable);
  good = 0;
  n = 0;
  center = 'style="text-align: center"';
  grå = 'style="color:#444444"';
  now = new Date();
  nu = now.toLocaleDateString("sv-SE");
  console.log(nu);
  for (j = 0, len1 = data_r.length; j < len1; j++) {
    r = data_r[j];
    g = r.games[0];
    if (r.finalized) {
      n += 1;
      if (r.homeResult !== 0 || r.awayResult !== 0) {
        good += 1;
      }
    }
    // if 1 >= Math.abs g.result then good += 1
    console.log(r.awayId, r.homeId);
    if (r.awayId === pid || r.homeId === pid) { // and g.result != -3
      färg = r.homeId === pid ? "vit" : "svart";
      // if r.awayId==-100 or r.homeId==-100 then continue
      s = "";
      s += td(r.date);
      s += td(r.roundNr, center);
      s += td(r.board, center);
      s += td(färg, center);
      opp = färg === 'vit' ? r.awayId : r.homeId;
      res = färg === 'vit' ? r.homeResult : r.awayResult;
      if (opp < 1000) {
        // res += " w.o."
        s += td("w.o.");
      } else {
        s += td(players[opp.toString()]);
      }
      if (g.result === -3) {
        res += " w.o.";
      }
      s += td(res, center);
      console.log(r.date);
      col = r.date < nu || r.finalized ? grå : "";
      stable += tr(s, col);
    }
  }
  // console.log r.awayId, r.homeId
  // console.log [r.date,r.roundNr,r.board,players[r.homeId.toString()],players[r.awayId.toString()],r.homeResult,r.awayResult]
  // render t, document.getElementById "app"
  app = document.getElementById('app');
  console.log(table(stable));
  app.innerHTML = table(stable);
  return console.log(`${good} of ${n} games played (${(100 * good / n).toFixed(1)}%)`);
};

// id = playerId
// console.log('aaa',id)
// console.log('bbb',games)
// t = table()
// console.log('ccc',t)
// rows = []
// for g of games 
// 	a = g.homeId
// 	b = g.awayId
// 	console.log
// 	if id==a or id==b
// 		pa = players[a]
// 		pb = players[b]
// 		if a in players and g.games[0].blackId!=-100 and g.games[0].whiteId!=-100
// 			row = tr()
// 			row.appendChild td g.date
// 			row.appendChild td g.roundNr
// 			row.appendChild td g.board
// 			row.appendChild td pa.elo
// 			row.appendChild td pa.name
// 			row.appendChild td pb.elo
// 			row.appendChild td pb.name
// 			row.appendChild td g.honeResult
// 			row.appendChild td g.awayResult
// 			t.appendChild row
// 			# console.log(`${g.date} ${g.roundNr} ${g.board} ${pa.elo} ${pa.name} vs ${pb.elo} ${pb.name} ${g.homeResult}-${g.awayResult}`)
// 			# console.log(g.date,g.roundNr,g.board,a,b,pa.elo,pa.name,pb.elo,pb.name,g.homeResult,g.awayResult)
// console.log(t)

// console.log 'loaded!'

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi5cXC4uXFwuLlxcIiwic291cmNlcyI6WyJjb250ZW50XFxrbHViYmVuXFxtZWRsZW1tYXJcXGNocmlzdGVyLW5pbHNzb25cXEFQSVxcc2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7O0FBQUEsS0FBQSxHQUFRLFFBQUEsQ0FBQyxDQUFELENBQUE7U0FBTyxXQUFBLEdBQWMsQ0FBZCxHQUFrQjtBQUF6Qjs7QUFDUixFQUFBLEdBQUssUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsR0FBa0IsQ0FBbEIsR0FBc0I7QUFBdEM7O0FBQ0wsRUFBQSxHQUFLLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQLENBQUEsQ0FBQSxDQUFBLEdBQWtCLENBQWxCLEdBQXNCO0FBQXRDOztBQUNMLEVBQUEsR0FBSyxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxHQUFrQixDQUFsQixHQUFzQjtBQUF0Qzs7QUFFTCxPQUFBLEdBQVUsUUFBQSxDQUFDLE1BQUQsRUFBUyxNQUFULEVBQWlCLEdBQWpCLENBQUE7QUFFVixNQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFB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VSxFQUFBLENBQUcsQ0FBSCxFQUFLLEdBQUwsRUFuQlg7O0VBUEQsQ0F4QkQ7Ozs7RUF1REMsR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLEtBQXhCO0VBQ04sT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFBLENBQU0sTUFBTixDQUFaO0VBQ0EsR0FBRyxDQUFDLFNBQUosR0FBZ0IsS0FBQSxDQUFNLE1BQU47U0FDaEIsT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFBLENBQUEsQ0FBRyxJQUFILENBQUEsSUFBQSxDQUFBLENBQWMsQ0FBZCxDQUFBLGVBQUEsQ0FBQSxDQUFpQyxDQUFDLEdBQUEsR0FBSSxJQUFKLEdBQVMsQ0FBVixDQUFZLENBQUMsT0FBYixDQUFxQixDQUFyQixDQUFqQyxDQUFBLEVBQUEsQ0FBWjtBQTVEUzs7QUFMViIsInNvdXJjZXNDb250ZW50IjpbInRhYmxlID0gKHMpIC0+IFwiPHRhYmxlPlxcblwiICsgcyArIFwiPC90YWJsZT5cIlxyXG50ZCA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRkICN7YXR0cnN9PlwiICsgcyArIFwiPC90ZD5cIlxyXG50ciA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRyICN7YXR0cnN9PlwiICsgcyArIFwiPC90cj5cXG5cIlxyXG50aCA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRoICN7YXR0cnN9PlwiICsgcyArIFwiPC90aD5cIlxyXG5cclxucHJvY2VzcyA9IChkYXRhX3QsIGRhdGFfciwgcGlkKSAtPlxyXG5cclxuXHRjb25zb2xlLmxvZyBkYXRhX3RcclxuXHRjb25zb2xlLmxvZyBkYXRhX3JcclxuXHJcblx0cGxheWVycyA9IHt9XHJcblx0Zm9yIHAgaW4gZGF0YV90XHJcblx0XHRwaSA9IHAucGxheWVySW5mb1xyXG5cdFx0cGxheWVyc1twLmNvbnRlbmRlcklkXSA9IHBpLmVsby5yYXRpbmcgKyAnICcgKyBwaS5sYXN0TmFtZS50b1VwcGVyQ2FzZSgpICsgJyAnICsgcGkuZmlyc3ROYW1lXHJcblxyXG5cdHN0YWJsZSA9IFwiXCJcclxuXHRzdGFibGUgKz0gdGggXCJkYXR1bVwiXHJcblx0c3RhYmxlICs9IHRoIFwicm9uZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiYm9yZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiZsOkcmdcIlxyXG5cdHN0YWJsZSArPSB0aCBcIm1vdFwiXHJcblx0c3RhYmxlICs9IHRoIFwicmVzdWx0YXRcIlxyXG5cdHN0YWJsZSA9IHRyIHN0YWJsZVxyXG5cdGdvb2QgPSAwXHJcblx0biA9IDBcclxuXHRjZW50ZXIgPSAnc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXJcIidcclxuXHRncsOlICAgID0gJ3N0eWxlPVwiY29sb3I6IzQ0NDQ0NFwiJ1xyXG5cdG5vdyA9IG5ldyBEYXRlKClcclxuXHRudSA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcgXCJzdi1TRVwiXHJcblx0Y29uc29sZS5sb2cgbnVcclxuXHJcblx0Zm9yIHIgaW4gZGF0YV9yXHJcblx0XHRnID0gci5nYW1lc1swXVxyXG5cdFx0aWYgci5maW5hbGl6ZWQgXHJcblx0XHRcdG4gKz0gMVxyXG5cdFx0XHRpZiByLmhvbWVSZXN1bHQgIT0gMCBvciByLmF3YXlSZXN1bHQgIT0gMCB0aGVuIGdvb2QgKz0gMVxyXG5cdFx0IyBpZiAxID49IE1hdGguYWJzIGcucmVzdWx0IHRoZW4gZ29vZCArPSAxXHJcblx0XHRjb25zb2xlLmxvZyByLmF3YXlJZCxyLmhvbWVJZFxyXG5cdFx0aWYgKHIuYXdheUlkID09IHBpZCBvciByLmhvbWVJZCA9PSBwaWQpICMgYW5kIGcucmVzdWx0ICE9IC0zXHJcblx0XHRcdGbDpHJnID0gaWYgci5ob21lSWQ9PXBpZCB0aGVuIFwidml0XCIgZWxzZSBcInN2YXJ0XCJcclxuXHRcdFx0IyBpZiByLmF3YXlJZD09LTEwMCBvciByLmhvbWVJZD09LTEwMCB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdHMgPSBcIlwiXHJcblx0XHRcdHMgKz0gdGQgci5kYXRlXHJcblx0XHRcdHMgKz0gdGQgci5yb3VuZE5yLGNlbnRlclxyXG5cdFx0XHRzICs9IHRkIHIuYm9hcmQsY2VudGVyXHJcblx0XHRcdHMgKz0gdGQgZsOkcmcsY2VudGVyXHJcblx0XHRcdG9wcCA9IGlmIGbDpHJnPT0ndml0JyB0aGVuIHIuYXdheUlkIGVsc2Ugci5ob21lSWRcclxuXHRcdFx0cmVzID0gaWYgZsOkcmc9PSd2aXQnIHRoZW4gci5ob21lUmVzdWx0IGVsc2Ugci5hd2F5UmVzdWx0XHJcblx0XHRcdGlmIG9wcCA8IDEwMDBcclxuXHRcdFx0XHQjIHJlcyArPSBcIiB3Lm8uXCJcclxuXHRcdFx0XHRzICs9IHRkIFwidy5vLlwiXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRzICs9IHRkIHBsYXllcnNbb3BwLnRvU3RyaW5nKCldXHJcblx0XHRcdGlmIGcucmVzdWx0PT0tMyB0aGVuIHJlcyArPSBcIiB3Lm8uXCJcclxuXHRcdFx0cyArPSB0ZCByZXMsY2VudGVyXHJcblx0XHRcdGNvbnNvbGUubG9nIHIuZGF0ZVxyXG5cdFx0XHRjb2wgPSBpZiByLmRhdGUgPCBudSBvciByLmZpbmFsaXplZCB0aGVuIGdyw6UgZWxzZSBcIlwiXHJcblx0XHRcdHN0YWJsZSArPSB0ciBzLGNvbFxyXG5cclxuXHRcdFx0IyBjb25zb2xlLmxvZyByLmF3YXlJZCwgci5ob21lSWRcclxuXHRcdFx0IyBjb25zb2xlLmxvZyBbci5kYXRlLHIucm91bmROcixyLmJvYXJkLHBsYXllcnNbci5ob21lSWQudG9TdHJpbmcoKV0scGxheWVyc1tyLmF3YXlJZC50b1N0cmluZygpXSxyLmhvbWVSZXN1bHQsci5hd2F5UmVzdWx0XVxyXG5cdCMgcmVuZGVyIHQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIFwiYXBwXCJcclxuXHRhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJylcclxuXHRjb25zb2xlLmxvZyB0YWJsZSBzdGFibGVcclxuXHRhcHAuaW5uZXJIVE1MID0gdGFibGUgc3RhYmxlXHJcblx0Y29uc29sZS5sb2cgXCIje2dvb2R9IG9mICN7bn0gZ2FtZXMgcGxheWVkICgjeygxMDAqZ29vZC9uKS50b0ZpeGVkIDF9JSlcIixcclxuXHJcblx0IyBpZCA9IHBsYXllcklkXHJcblx0IyBjb25zb2xlLmxvZygnYWFhJyxpZClcclxuXHQjIGNvbnNvbGUubG9nKCdiYmInLGdhbWVzKVxyXG5cdCMgdCA9IHRhYmxlKClcclxuXHQjIGNvbnNvbGUubG9nKCdjY2MnLHQpXHJcblx0IyByb3dzID0gW11cclxuXHQjIGZvciBnIG9mIGdhbWVzIFxyXG5cdCMgXHRhID0gZy5ob21lSWRcclxuXHQjIFx0YiA9IGcuYXdheUlkXHJcblx0IyBcdGNvbnNvbGUubG9nXHJcblx0IyBcdGlmIGlkPT1hIG9yIGlkPT1iXHJcblx0IyBcdFx0cGEgPSBwbGF5ZXJzW2FdXHJcblx0IyBcdFx0cGIgPSBwbGF5ZXJzW2JdXHJcblx0IyBcdFx0aWYgYSBpbiBwbGF5ZXJzIGFuZCBnLmdhbWVzWzBdLmJsYWNrSWQhPS0xMDAgYW5kIGcuZ2FtZXNbMF0ud2hpdGVJZCE9LTEwMFxyXG5cdCMgXHRcdFx0cm93ID0gdHIoKVxyXG5cdCMgXHRcdFx0cm93LmFwcGVuZENoaWxkIHRkIGcuZGF0ZVxyXG5cdCMgXHRcdFx0cm93LmFwcGVuZENoaWxkIHRkIGcucm91bmROclxyXG5cdCMgXHRcdFx0cm93LmFwcGVuZENoaWxkIHRkIGcuYm9hcmRcclxuXHQjIFx0XHRcdHJvdy5hcHBlbmRDaGlsZCB0ZCBwYS5lbG9cclxuXHQjIFx0XHRcdHJvdy5hcHBlbmRDaGlsZCB0ZCBwYS5uYW1lXHJcblx0IyBcdFx0XHRyb3cuYXBwZW5kQ2hpbGQgdGQgcGIuZWxvXHJcblx0IyBcdFx0XHRyb3cuYXBwZW5kQ2hpbGQgdGQgcGIubmFtZVxyXG5cdCMgXHRcdFx0cm93LmFwcGVuZENoaWxkIHRkIGcuaG9uZVJlc3VsdFxyXG5cdCMgXHRcdFx0cm93LmFwcGVuZENoaWxkIHRkIGcuYXdheVJlc3VsdFxyXG5cdCMgXHRcdFx0dC5hcHBlbmRDaGlsZCByb3dcclxuXHQjIFx0XHRcdCMgY29uc29sZS5sb2coYCR7Zy5kYXRlfSAke2cucm91bmROcn0gJHtnLmJvYXJkfSAke3BhLmVsb30gJHtwYS5uYW1lfSB2cyAke3BiLmVsb30gJHtwYi5uYW1lfSAke2cuaG9tZVJlc3VsdH0tJHtnLmF3YXlSZXN1bHR9YClcclxuXHQjIFx0XHRcdCMgY29uc29sZS5sb2coZy5kYXRlLGcucm91bmROcixnLmJvYXJkLGEsYixwYS5lbG8scGEubmFtZSxwYi5lbG8scGIubmFtZSxnLmhvbWVSZXN1bHQsZy5hd2F5UmVzdWx0KVxyXG5cdCMgY29uc29sZS5sb2codClcclxuXHJcbiMgY29uc29sZS5sb2cgJ2xvYWRlZCEnXHJcblxyXG4iXX0=
//# sourceURL=c:\github\SrS\content\klubben\medlemmar\christer-nilsson\API\sketch.coffee