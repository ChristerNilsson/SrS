// Generated by CoffeeScript 2.7.0
var process, table, td, th, tr, turneringar;

table = function(s) {
  return "<table>\n" + s + "</table>";
};

td = function(s, attrs = "") {
  return `<td ${attrs}>` + s + "</td>";
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>` + s + "</tr>\n";
};

th = function(s, attrs = "") {
  return `<th ${attrs}>` + s + "</th>";
};

turneringar = {
  14507: "Klass M",
  14508: "Klass 1",
  14509: "Klass 2",
  14510: "Klass 3",
  14512: "Klass 4"
};

process = function(data_t, data_r, tid, pid) {
  var app, center, col, färg, g, good, grå, i, j, len, len1, n, now, nu, opp, p, pi, players, r, ref, ref1, res, s, spelare, stable, statistik, turnering;
  console.log(data_t);
  console.log(data_r);
  players = {};
  for (i = 0, len = data_t.length; i < len; i++) {
    p = data_t[i];
    pi = p.playerInfo;
    players[p.contenderId] = pi.elo.rating + ' ' + pi.lastName.toUpperCase() + ' ' + pi.firstName;
  }
  stable = "";
  stable += th("datum");
  stable += th("rond");
  stable += th("bord");
  stable += th("färg");
  stable += th("mot");
  stable += th("resultat");
  stable = tr(stable);
  good = 0;
  n = 0;
  center = 'style="text-align: center"';
  grå = 'style="color:#444444"';
  now = new Date();
  nu = now.toLocaleDateString("sv-SE");
  for (j = 0, len1 = data_r.length; j < len1; j++) {
    r = data_r[j];
    g = r.games[0];
    if (r.finalized) {
      n += 1;
      // if r.homeResult != 0 or r.awayResult != 0 then good += 1
      if ((ref = g.result) === (-1) || ref === 0 || ref === 1) {
        good += 1;
      }
    }
    // console.log r.awayId,r.homeId
    if (r.awayId === pid || r.homeId === pid) {
      färg = r.homeId === pid ? "vit" : "svart";
      s = "";
      s += td(r.date);
      s += td(r.roundNr, center);
      s += td(r.board, center);
      s += td(färg, center);
      opp = färg === 'vit' ? r.awayId : r.homeId;
      res = färg === 'vit' ? r.homeResult : r.awayResult;
      if (opp < 1000) {
        s += td("w.o.");
      } else {
        s += td(players[opp.toString()]);
      }
      if ((ref1 = g.result) === (-3) || ref1 === (-2) || ref1 === 2) {
        res += " w.o.";
      }
      s += td(res, center);
      col = r.date < nu || r.finalized ? grå : "";
      stable += tr(s, col);
    }
  }
  turnering = document.getElementById('turnering');
  spelare = document.getElementById('spelare');
  app = document.getElementById('app');
  statistik = document.getElementById('statistik');
  turnering.innerHTML = `<a href='https://member.schack.se/ShowTournamentServlet?id=${tid}'>${turneringar[tid]}</a>`;
  spelare.innerText = "Spelare: " + players[pid];
  app.innerHTML = table(stable);
  return statistik.innerText = `${good} of ${n} games played (${(100 * good / n).toFixed(1)}%)`;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcIiwic291cmNlcyI6WyJjb250ZW50XFxBUElcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTs7QUFBQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUFPLFdBQUEsR0FBYyxDQUFkLEdBQWtCO0FBQXpCOztBQUNSLEVBQUEsR0FBSyxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxHQUFrQixDQUFsQixHQUFzQjtBQUF0Qzs7QUFDTCxFQUFBLEdBQUssUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsR0FBa0IsQ0FBbEIsR0FBc0I7QUFBdEM7O0FBQ0wsRUFBQSxHQUFLLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQLENBQUEsQ0FBQSxDQUFBLEdBQWtCLENBQWxCLEdBQXNCO0FBQXRDOztBQUVMLFdBQUEsR0FBYztFQUNiLEtBQUEsRUFBTyxTQURNO0VBRWIsS0FBQSxFQUFPLFNBRk07RUFHYixLQUFBLEVBQU8sU0FITTtFQUliLEtBQUEsRUFBTyxTQUpNO0VBS2IsS0FBQSxFQUFPO0FBTE07O0FBUWQsT0FBQSxHQUFVLFFBQUEsQ0FBQyxNQUFELEVBQVMsTUFBVCxFQUFpQixHQUFqQixFQUFzQixHQUF0QixDQUFBO0FBRVYsTUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxH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QTRDO01BQ2xELE1BQUEsSUFBVSxFQUFBLENBQUcsQ0FBSCxFQUFLLEdBQUwsRUFoQlg7O0VBUEQ7RUF5QkEsU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBQ1osT0FBQSxHQUFVLFFBQVEsQ0FBQyxjQUFULENBQXdCLFNBQXhCO0VBQ1YsR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLEtBQXhCO0VBQ04sU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBRVosU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSwyREFBQSxDQUFBLENBQThELEdBQTlELENBQUEsRUFBQSxDQUFBLENBQXNFLFdBQVcsQ0FBQyxHQUFELENBQWpGLENBQUEsSUFBQTtFQUN0QixPQUFPLENBQUMsU0FBUixHQUFvQixXQUFBLEdBQWMsT0FBTyxDQUFDLEdBQUQ7RUFDekMsR0FBRyxDQUFDLFNBQUosR0FBZ0IsS0FBQSxDQUFNLE1BQU47U0FDaEIsU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSxDQUFBLENBQUcsSUFBSCxDQUFBLElBQUEsQ0FBQSxDQUFjLENBQWQsQ0FBQSxlQUFBLENBQUEsQ0FBaUMsQ0FBQyxHQUFBLEdBQUksSUFBSixHQUFTLENBQVYsQ0FBWSxDQUFDLE9BQWIsQ0FBcUIsQ0FBckIsQ0FBakMsQ0FBQSxFQUFBO0FBMURiIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUgPSAocykgLT4gXCI8dGFibGU+XFxuXCIgKyBzICsgXCI8L3RhYmxlPlwiXHJcbnRkID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGQgI3thdHRyc30+XCIgKyBzICsgXCI8L3RkPlwiXHJcbnRyID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dHIgI3thdHRyc30+XCIgKyBzICsgXCI8L3RyPlxcblwiXHJcbnRoID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGggI3thdHRyc30+XCIgKyBzICsgXCI8L3RoPlwiXHJcblxyXG50dXJuZXJpbmdhciA9IHtcclxuXHQxNDUwNzogXCJLbGFzcyBNXCIsXHJcblx0MTQ1MDg6IFwiS2xhc3MgMVwiLFxyXG5cdDE0NTA5OiBcIktsYXNzIDJcIixcclxuXHQxNDUxMDogXCJLbGFzcyAzXCIsXHJcblx0MTQ1MTI6IFwiS2xhc3MgNFwiLFxyXG59XHJcblxyXG5wcm9jZXNzID0gKGRhdGFfdCwgZGF0YV9yLCB0aWQsIHBpZCkgLT5cclxuXHJcblx0Y29uc29sZS5sb2cgZGF0YV90XHJcblx0Y29uc29sZS5sb2cgZGF0YV9yXHJcblxyXG5cdHBsYXllcnMgPSB7fVxyXG5cdGZvciBwIGluIGRhdGFfdFxyXG5cdFx0cGkgPSBwLnBsYXllckluZm9cclxuXHRcdHBsYXllcnNbcC5jb250ZW5kZXJJZF0gPSBwaS5lbG8ucmF0aW5nICsgJyAnICsgcGkubGFzdE5hbWUudG9VcHBlckNhc2UoKSArICcgJyArIHBpLmZpcnN0TmFtZVxyXG5cclxuXHRzdGFibGUgPSBcIlwiXHJcblx0c3RhYmxlICs9IHRoIFwiZGF0dW1cIlxyXG5cdHN0YWJsZSArPSB0aCBcInJvbmRcIlxyXG5cdHN0YWJsZSArPSB0aCBcImJvcmRcIlxyXG5cdHN0YWJsZSArPSB0aCBcImbDpHJnXCJcclxuXHRzdGFibGUgKz0gdGggXCJtb3RcIlxyXG5cdHN0YWJsZSArPSB0aCBcInJlc3VsdGF0XCJcclxuXHRzdGFibGUgPSB0ciBzdGFibGVcclxuXHRnb29kID0gMFxyXG5cdG4gPSAwXHJcblx0Y2VudGVyID0gJ3N0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCInXHJcblx0Z3LDpSAgICA9ICdzdHlsZT1cImNvbG9yOiM0NDQ0NDRcIidcclxuXHRub3cgPSBuZXcgRGF0ZSgpXHJcblx0bnUgPSBub3cudG9Mb2NhbGVEYXRlU3RyaW5nIFwic3YtU0VcIlxyXG5cclxuXHRmb3IgciBpbiBkYXRhX3JcclxuXHRcdGcgPSByLmdhbWVzWzBdXHJcblx0XHRpZiByLmZpbmFsaXplZCBcclxuXHRcdFx0biArPSAxXHJcblx0XHRcdCMgaWYgci5ob21lUmVzdWx0ICE9IDAgb3Igci5hd2F5UmVzdWx0ICE9IDAgdGhlbiBnb29kICs9IDFcclxuXHRcdFx0aWYgZy5yZXN1bHQgaW4gWy0xLDAsMV0gdGhlbiBnb29kICs9IDFcclxuXHRcdCMgY29uc29sZS5sb2cgci5hd2F5SWQsci5ob21lSWRcclxuXHRcdGlmIHIuYXdheUlkID09IHBpZCBvciByLmhvbWVJZCA9PSBwaWRcclxuXHRcdFx0ZsOkcmcgPSBpZiByLmhvbWVJZD09cGlkIHRoZW4gXCJ2aXRcIiBlbHNlIFwic3ZhcnRcIlxyXG5cdFx0XHRzID0gXCJcIlxyXG5cdFx0XHRzICs9IHRkIHIuZGF0ZVxyXG5cdFx0XHRzICs9IHRkIHIucm91bmROcixjZW50ZXJcclxuXHRcdFx0cyArPSB0ZCByLmJvYXJkLGNlbnRlclxyXG5cdFx0XHRzICs9IHRkIGbDpHJnLGNlbnRlclxyXG5cdFx0XHRvcHAgPSBpZiBmw6RyZz09J3ZpdCcgdGhlbiByLmF3YXlJZCBlbHNlIHIuaG9tZUlkXHJcblx0XHRcdHJlcyA9IGlmIGbDpHJnPT0ndml0JyB0aGVuIHIuaG9tZVJlc3VsdCBlbHNlIHIuYXdheVJlc3VsdFxyXG5cdFx0XHRpZiBvcHAgPCAxMDAwXHJcblx0XHRcdFx0cyArPSB0ZCBcIncuby5cIlxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cyArPSB0ZCBwbGF5ZXJzW29wcC50b1N0cmluZygpXVxyXG5cdFx0XHRpZiBnLnJlc3VsdCBpbiBbLTMsLTIsMl0gdGhlbiByZXMgKz0gXCIgdy5vLlwiXHJcblx0XHRcdHMgKz0gdGQgcmVzLGNlbnRlclxyXG5cdFx0XHRjb2wgPSBpZiByLmRhdGUgPCBudSBvciByLmZpbmFsaXplZCB0aGVuIGdyw6UgZWxzZSBcIlwiXHJcblx0XHRcdHN0YWJsZSArPSB0ciBzLGNvbFxyXG5cclxuXHR0dXJuZXJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAndHVybmVyaW5nJ1xyXG5cdHNwZWxhcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnc3BlbGFyZSdcclxuXHRhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnYXBwJ1xyXG5cdHN0YXRpc3RpayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdzdGF0aXN0aWsnXHJcblxyXG5cdHR1cm5lcmluZy5pbm5lckhUTUwgPSBcIjxhIGhyZWY9J2h0dHBzOi8vbWVtYmVyLnNjaGFjay5zZS9TaG93VG91cm5hbWVudFNlcnZsZXQ/aWQ9I3t0aWR9Jz4je3R1cm5lcmluZ2FyW3RpZF19PC9hPlwiXHJcblx0c3BlbGFyZS5pbm5lclRleHQgPSBcIlNwZWxhcmU6IFwiICsgcGxheWVyc1twaWRdXHJcblx0YXBwLmlubmVySFRNTCA9IHRhYmxlIHN0YWJsZVxyXG5cdHN0YXRpc3Rpay5pbm5lclRleHQgPSBcIiN7Z29vZH0gb2YgI3tufSBnYW1lcyBwbGF5ZWQgKCN7KDEwMCpnb29kL24pLnRvRml4ZWQgMX0lKVwiXHJcbiJdfQ==
//# sourceURL=c:\github\SrS\content\API\sketch.coffee