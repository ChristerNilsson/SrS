// Generated by CoffeeScript 2.7.0
var process, table, td, th, tr, turneringar;

table = function(s) {
  return `<table>\n${s}</table>`;
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>${s}</tr>\n`;
};

td = function(s, attrs = "") {
  return `<td ${attrs}>${s}</td>`;
};

th = function(s, attrs = "") {
  return `<th ${attrs}>${s}</th>`;
};

turneringar = {
  14507: "Klass M",
  14508: "Klass 1",
  14509: "Klass 2",
  14510: "Klass 3",
  14512: "Klass 4"
};

process = function(data_t, data_r, tid, pid) {
  var app, center, col, färg, g, grå, i, j, len, len1, n, now, nu, opp, p, pi, played, players, r, ref, ref1, res, s, spelare, stable, statistik, turnering;
  console.log(data_t);
  console.log(data_r);
  players = {};
  for (i = 0, len = data_t.length; i < len; i++) {
    p = data_t[i];
    pi = p.playerInfo;
    players[p.contenderId] = pi.elo.rating + ' ' + pi.lastName.toUpperCase() + ' ' + pi.firstName;
  }
  stable = "";
  stable += th("datum");
  stable += th("rond");
  stable += th("bord");
  stable += th("färg");
  stable += th("mot");
  stable += th("resultat");
  stable = tr(stable);
  played = 0;
  n = data_r.length;
  center = 'style="text-align: center"';
  grå = 'class="old"';
  now = new Date();
  nu = now.toLocaleDateString("sv-SE");
  for (j = 0, len1 = data_r.length; j < len1; j++) {
    r = data_r[j];
    g = r.games[0];
    if (r.finalized && ((ref = g.result) === (-1) || ref === 0 || ref === 1)) {
      played += 1;
    }
    if (r.awayId === pid || r.homeId === pid) {
      färg = r.homeId === pid ? "vit" : "svart";
      s = "";
      s += td(r.date);
      s += td(r.roundNr, center);
      s += td(r.board, center);
      s += td(färg, center);
      opp = färg === 'vit' ? r.awayId : r.homeId;
      res = färg === 'vit' ? r.homeResult : r.awayResult;
      if (opp < 1000) {
        s += td("w.o.");
      } else {
        s += td(players[opp.toString()]);
      }
      if ((ref1 = g.result) === (-3) || ref1 === (-2) || ref1 === 2) {
        res += " w.o.";
      }
      s += td(res, center);
      col = r.date < nu || r.finalized ? grå : "";
      stable += tr(s, col);
    }
  }
  turnering = document.getElementById('turnering');
  spelare = document.getElementById('spelare');
  app = document.getElementById('app');
  statistik = document.getElementById('statistik');
  turnering.innerHTML = `<a href='https://member.schack.se/ShowTournamentServlet?id=${tid}'>${turneringar[tid]}</a>`;
  spelare.innerText = "Spelare: " + players[pid];
  app.innerHTML = table(stable);
  return statistik.innerText = `${played} av ${n} partier spelade i turneringen. (${(100 * played / n).toFixed(1)}%)`;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcIiwic291cmNlcyI6WyJjb250ZW50XFxBUElcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTs7QUFBQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUFPLENBQUEsU0FBQSxDQUFBLENBQVksQ0FBWixDQUFBLFFBQUE7QUFBUDs7QUFDUixFQUFBLEdBQUssUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsQ0FBZ0IsQ0FBaEIsQ0FBQSxPQUFBO0FBQWhCOztBQUNMLEVBQUEsR0FBSyxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxDQUFnQixDQUFoQixDQUFBLEtBQUE7QUFBaEI7O0FBQ0wsRUFBQSxHQUFLLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQLENBQUEsQ0FBQSxDQUFBLENBQWdCLENBQWhCLENBQUEsS0FBQTtBQUFoQjs7QUFFTCxXQUFBLEdBQWM7RUFDYixLQUFBLEVBQU8sU0FETTtFQUViLEtBQUEsRUFBTyxTQUZNO0VBR2IsS0FBQSxFQUFPLFNBSE07RUFJYixLQUFBLEVBQU8sU0FKTTtFQUtiLEtBQUEsRUFBTztBQUxNOztBQVFkLE9BQUEsR0FBVSxRQUFBLENBQUMsTUFBRCxFQUFTLE1BQVQsRUFBaUIsR0FBakIsRUFBc0IsR0FBdEIsQ0FBQTtBQUVWLE1BQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxF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QTRDO01BQ2xELE1BQUEsSUFBVSxFQUFBLENBQUcsQ0FBSCxFQUFLLEdBQUwsRUFoQlg7O0VBSEQ7RUFxQkEsU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBQ1osT0FBQSxHQUFVLFFBQVEsQ0FBQyxjQUFULENBQXdCLFNBQXhCO0VBQ1YsR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLEtBQXhCO0VBQ04sU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBRVosU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSwyREFBQSxDQUFBLENBQThELEdBQTlELENBQUEsRUFBQSxDQUFBLENBQXNFLFdBQVcsQ0FBQyxHQUFELENBQWpGLENBQUEsSUFBQTtFQUN0QixPQUFPLENBQUMsU0FBUixHQUFvQixXQUFBLEdBQWMsT0FBTyxDQUFDLEdBQUQ7RUFDekMsR0FBRyxDQUFDLFNBQUosR0FBZ0IsS0FBQSxDQUFNLE1BQU47U0FDaEIsU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSxDQUFBLENBQUcsTUFBSCxDQUFBLElBQUEsQ0FBQSxDQUFnQixDQUFoQixDQUFBLGlDQUFBLENBQUEsQ0FBcUQsQ0FBQyxHQUFBLEdBQUksTUFBSixHQUFXLENBQVosQ0FBYyxDQUFDLE9BQWYsQ0FBdUIsQ0FBdkIsQ0FBckQsQ0FBQSxFQUFBO0FBeERiIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUgPSAocykgLT4gXCI8dGFibGU+XFxuI3tzfTwvdGFibGU+XCJcclxudHIgPSAocyxhdHRycz1cIlwiKSAtPiBcIjx0ciAje2F0dHJzfT4je3N9PC90cj5cXG5cIlxyXG50ZCA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRkICN7YXR0cnN9PiN7c308L3RkPlwiXHJcbnRoID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGggI3thdHRyc30+I3tzfTwvdGg+XCJcclxuXHJcbnR1cm5lcmluZ2FyID0ge1xyXG5cdDE0NTA3OiBcIktsYXNzIE1cIixcclxuXHQxNDUwODogXCJLbGFzcyAxXCIsXHJcblx0MTQ1MDk6IFwiS2xhc3MgMlwiLFxyXG5cdDE0NTEwOiBcIktsYXNzIDNcIixcclxuXHQxNDUxMjogXCJLbGFzcyA0XCIsXHJcbn1cclxuXHJcbnByb2Nlc3MgPSAoZGF0YV90LCBkYXRhX3IsIHRpZCwgcGlkKSAtPlxyXG5cclxuXHRjb25zb2xlLmxvZyBkYXRhX3RcclxuXHRjb25zb2xlLmxvZyBkYXRhX3JcclxuXHJcblx0cGxheWVycyA9IHt9XHJcblx0Zm9yIHAgaW4gZGF0YV90XHJcblx0XHRwaSA9IHAucGxheWVySW5mb1xyXG5cdFx0cGxheWVyc1twLmNvbnRlbmRlcklkXSA9IHBpLmVsby5yYXRpbmcgKyAnICcgKyBwaS5sYXN0TmFtZS50b1VwcGVyQ2FzZSgpICsgJyAnICsgcGkuZmlyc3ROYW1lXHJcblxyXG5cdHN0YWJsZSA9IFwiXCJcclxuXHRzdGFibGUgKz0gdGggXCJkYXR1bVwiXHJcblx0c3RhYmxlICs9IHRoIFwicm9uZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiYm9yZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiZsOkcmdcIlxyXG5cdHN0YWJsZSArPSB0aCBcIm1vdFwiXHJcblx0c3RhYmxlICs9IHRoIFwicmVzdWx0YXRcIlxyXG5cdHN0YWJsZSA9IHRyIHN0YWJsZVxyXG5cclxuXHRwbGF5ZWQgPSAwXHJcblx0biA9IGRhdGFfci5sZW5ndGhcclxuXHJcblx0Y2VudGVyID0gJ3N0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCInXHJcblx0Z3LDpSAgICA9ICdjbGFzcz1cIm9sZFwiJ1xyXG5cdG5vdyA9IG5ldyBEYXRlKClcclxuXHRudSA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcgXCJzdi1TRVwiXHJcblxyXG5cdGZvciByIGluIGRhdGFfclxyXG5cdFx0ZyA9IHIuZ2FtZXNbMF1cclxuXHRcdGlmIHIuZmluYWxpemVkIGFuZCBnLnJlc3VsdCBpbiBbLTEsMCwxXSB0aGVuIHBsYXllZCArPSAxXHJcblx0XHRpZiByLmF3YXlJZCA9PSBwaWQgb3Igci5ob21lSWQgPT0gcGlkXHJcblx0XHRcdGbDpHJnID0gaWYgci5ob21lSWQ9PXBpZCB0aGVuIFwidml0XCIgZWxzZSBcInN2YXJ0XCJcclxuXHRcdFx0cyA9IFwiXCJcclxuXHRcdFx0cyArPSB0ZCByLmRhdGVcclxuXHRcdFx0cyArPSB0ZCByLnJvdW5kTnIsY2VudGVyXHJcblx0XHRcdHMgKz0gdGQgci5ib2FyZCxjZW50ZXJcclxuXHRcdFx0cyArPSB0ZCBmw6RyZyxjZW50ZXJcclxuXHRcdFx0b3BwID0gaWYgZsOkcmc9PSd2aXQnIHRoZW4gci5hd2F5SWQgZWxzZSByLmhvbWVJZFxyXG5cdFx0XHRyZXMgPSBpZiBmw6RyZz09J3ZpdCcgdGhlbiByLmhvbWVSZXN1bHQgZWxzZSByLmF3YXlSZXN1bHRcclxuXHRcdFx0aWYgb3BwIDwgMTAwMFxyXG5cdFx0XHRcdHMgKz0gdGQgXCJ3Lm8uXCJcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHMgKz0gdGQgcGxheWVyc1tvcHAudG9TdHJpbmcoKV1cclxuXHRcdFx0aWYgZy5yZXN1bHQgaW4gWy0zLC0yLDJdIHRoZW4gcmVzICs9IFwiIHcuby5cIlxyXG5cdFx0XHRzICs9IHRkIHJlcyxjZW50ZXJcclxuXHRcdFx0Y29sID0gaWYgci5kYXRlIDwgbnUgb3Igci5maW5hbGl6ZWQgdGhlbiBncsOlIGVsc2UgXCJcIlxyXG5cdFx0XHRzdGFibGUgKz0gdHIgcyxjb2xcclxuXHJcblx0dHVybmVyaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3R1cm5lcmluZydcclxuXHRzcGVsYXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3NwZWxhcmUnXHJcblx0YXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2FwcCdcclxuXHRzdGF0aXN0aWsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnc3RhdGlzdGlrJ1xyXG5cclxuXHR0dXJuZXJpbmcuaW5uZXJIVE1MID0gXCI8YSBocmVmPSdodHRwczovL21lbWJlci5zY2hhY2suc2UvU2hvd1RvdXJuYW1lbnRTZXJ2bGV0P2lkPSN7dGlkfSc+I3t0dXJuZXJpbmdhclt0aWRdfTwvYT5cIlxyXG5cdHNwZWxhcmUuaW5uZXJUZXh0ID0gXCJTcGVsYXJlOiBcIiArIHBsYXllcnNbcGlkXVxyXG5cdGFwcC5pbm5lckhUTUwgPSB0YWJsZSBzdGFibGVcclxuXHRzdGF0aXN0aWsuaW5uZXJUZXh0ID0gXCIje3BsYXllZH0gYXYgI3tufSBwYXJ0aWVyIHNwZWxhZGUgaSB0dXJuZXJpbmdlbi4gKCN7KDEwMCpwbGF5ZWQvbikudG9GaXhlZCAxfSUpXCJcclxuIl19
//# sourceURL=c:\github\SrS\content\API\sketch.coffee