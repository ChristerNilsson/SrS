// Generated by CoffeeScript 2.7.0
var process, table, td, th, tr, turneringar;

table = function(s) {
  return "<table>\n" + s + "</table>";
};

td = function(s, attrs = "") {
  return `<td ${attrs}>` + s + "</td>";
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>` + s + "</tr>\n";
};

th = function(s, attrs = "") {
  return `<th ${attrs}>` + s + "</th>";
};

turneringar = {
  14507: "Klass M",
  14508: "Klass 1",
  14509: "Klass 2",
  14510: "Klass 3",
  14512: "Klass 4"
};

process = function(data_t, data_r, tid, pid) {
  var app, center, col, färg, g, good, grå, i, j, len, len1, n, now, nu, opp, p, pi, players, r, res, s, spelare, stable, statistik, turnering;
  console.log(data_t);
  console.log(data_r);
  players = {};
  for (i = 0, len = data_t.length; i < len; i++) {
    p = data_t[i];
    pi = p.playerInfo;
    players[p.contenderId] = pi.elo.rating + ' ' + pi.lastName.toUpperCase() + ' ' + pi.firstName;
  }
  stable = "";
  stable += th("datum");
  stable += th("rond");
  stable += th("bord");
  stable += th("färg");
  stable += th("mot");
  stable += th("resultat");
  stable = tr(stable);
  good = 0;
  n = 0;
  center = 'style="text-align: center"';
  grå = 'style="color:#444444"';
  now = new Date();
  nu = now.toLocaleDateString("sv-SE");
  for (j = 0, len1 = data_r.length; j < len1; j++) {
    r = data_r[j];
    g = r.games[0];
    if (r.finalized) {
      n += 1;
      if (r.homeResult !== 0 || r.awayResult !== 0) {
        good += 1;
      }
    }
    // console.log r.awayId,r.homeId
    if (r.awayId === pid || r.homeId === pid) {
      färg = r.homeId === pid ? "vit" : "svart";
      s = "";
      s += td(r.date);
      s += td(r.roundNr, center);
      s += td(r.board, center);
      s += td(färg, center);
      opp = färg === 'vit' ? r.awayId : r.homeId;
      res = färg === 'vit' ? r.homeResult : r.awayResult;
      if (opp < 1000) {
        s += td("w.o.");
      } else {
        s += td(players[opp.toString()]);
      }
      if (g.result === -3) {
        res += " w.o.";
      }
      s += td(res, center);
      col = r.date < nu || r.finalized ? grå : "";
      stable += tr(s, col);
    }
  }
  turnering = document.getElementById('turnering');
  spelare = document.getElementById('spelare');
  app = document.getElementById('app');
  statistik = document.getElementById('statistik');
  turnering.innerHTML = `<a href='https://member.schack.se/ShowTournamentServlet?id=${tid}'>${turneringar[tid]}</a>`;
  spelare.innerText = "Spelare: " + players[pid];
  app.innerHTML = table(stable);
  return statistik.innerText = `${good} of ${n} games played (${(100 * good / n).toFixed(1)}%)`;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcIiwic291cmNlcyI6WyJjb250ZW50XFxBUElcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTs7QUFBQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUFPLFdBQUEsR0FBYyxDQUFkLEdBQWtCO0FBQXpCOztBQUNSLEVBQUEsR0FBSyxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxHQUFrQixDQUFsQixHQUFzQjtBQUF0Qzs7QUFDTCxFQUFBLEdBQUssUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsR0FBa0IsQ0FBbEIsR0FBc0I7QUFBdEM7O0FBQ0wsRUFBQSxHQUFLLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQLENBQUEsQ0FBQSxDQUFBLEdBQWtCLENBQWxCLEdBQXNCO0FBQXRDOztBQUVMLFdBQUEsR0FBYztFQUNiLEtBQUEsRUFBTyxTQURNO0VBRWIsS0FBQSxFQUFPLFNBRk07RUFHYixLQUFBLEVBQU8sU0FITTtFQUliLEtBQUEsRUFBTyxTQUpNO0VBS2IsS0FBQSxFQUFPO0FBTE07O0FBUWQsT0FBQSxHQUFVLFFBQUEsQ0FBQyxNQUFELEVBQVMsTUFBVCxFQUFpQixHQUFqQixFQUFzQixHQUF0QixDQUFBO0FBRVYsTUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsRUFBQTtFQUFDLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtFQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtFQUVBLE9BQUEsR0FBVSxDQUFBO0VBQ1YsS0FBQSx3Q0FBQTs7SUFDQyxFQUFBLEdBQUssQ0FBQyxDQUFDO0lBQ1AsT0FBTyxDQUFDLENBQUMsQ0FBQyxXQUFILENBQVAsR0FBeUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFQLEdBQWdCLEdBQWhCLEdBQXNCLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBWixDQUFBLENBQXRCLEdBQWtELEdBQWxELEdBQXdELEVBQUUsQ0FBQztFQUZyRjtFQUlBLE1BQUEsR0FBUztFQUNULE1BQUEsSUFBVSxFQUFBLENBQUcsT0FBSDtFQUNWLE1BQUEsSUFBVSxFQUFBLENBQUcsTUFBSDtFQUNWLE1BQUEsSUFBVSxFQUFBLENBQUcsTUFBSDtFQUNWLE1BQUEsSUFBVSxFQUFBLENBQUcsTUFBSDtFQUNWLE1BQUEsSUFBVSxFQUFBLENBQUcsS0FBSDtFQUNWLE1BQUEsSUFBVSxFQUFBLENBQUcsVUFBSDtFQUNWLE1BQUEsR0FBUyxFQUFBLENBQUcsTUFBSDtFQUNULElBQUEsR0FBTztFQUNQLENBQUEsR0FBSTtFQUNKLE1BQUEsR0FBUztFQUNULEdBQUEsR0FBUztFQUNULEdBQUEsR0FBTSxJQUFJLElBQUosQ0FBQTtFQUNOLEVBQUEsR0FBSyxHQUFHLENBQUMsa0JBQUosQ0FBdUIsT0FBdkI7RUFFTCxLQUFBLDBDQUFBOztJQUNDLENBQUEsR0FBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUQ7SUFDWCxJQUFHLENBQUMsQ0FBQyxTQUFMO01BQ0MsQ0FBQSxJQUFLO01BQ0wsSUFBRyxDQUFDLENBQUMsVUFBRixLQUFnQixDQUFoQixJQUFxQixDQUFDLENBQUMsVUFBRixLQUFnQixDQUF4QztRQUErQyxJQUFBLElBQVEsRUFBdkQ7T0FGRDtLQURGOztJQUtFLElBQUcsQ0FBQyxDQUFDLE1BQUYsS0FBWSxHQUFaLElBQW1CLENBQUMsQ0FBQyxNQUFGLEtBQVksR0FBbEM7TUFDQyxJQUFBLEdBQVUsQ0FBQyxDQUFDLE1BQUYsS0FBVSxHQUFiLEdBQXNCLEtBQXRCLEdBQWlDO01BQ3hDLENBQUEsR0FBSTtNQUNKLENBQUEsSUFBSyxFQUFBLENBQUcsQ0FBQyxDQUFDLElBQUw7TUFDTCxDQUFBLElBQUssRUFBQSxDQUFHLENBQUMsQ0FBQyxPQUFMLEVBQWEsTUFBYjtNQUNMLENBQUEsSUFBSyxFQUFBLENBQUcsQ0FBQyxDQUFDLEtBQUwsRUFBVyxNQUFYO01BQ0wsQ0FBQSxJQUFLLEVBQUEsQ0FBRyxJQUFILEVBQVEsTUFBUjtNQUNMLEdBQUEsR0FBUyxJQUFBLEtBQU0sS0FBVCxHQUFvQixDQUFDLENBQUMsTUFBdEIsR0FBa0MsQ0FBQyxDQUFDO01BQzFDLEdBQUEsR0FBUyxJQUFBLEtBQU0sS0FBVCxHQUFvQixDQUFDLENBQUMsVUFBdEIsR0FBc0MsQ0FBQyxDQUFDO01BQzlDLElBQUcsR0FBQSxHQUFNLElBQVQ7UUFDQyxDQUFBLElBQUssRUFBQSxDQUFHLE1BQUgsRUFETjtPQUFBLE1BQUE7UUFHQyxDQUFBLElBQUssRUFBQSxDQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBSixDQUFBLENBQUQsQ0FBVixFQUhOOztNQUlBLElBQUcsQ0FBQyxDQUFDLE1BQUYsS0FBVSxDQUFDLENBQWQ7UUFBcUIsR0FBQSxJQUFPLFFBQTVCOztNQUNBLENBQUEsSUFBSyxFQUFBLENBQUcsR0FBSCxFQUFPLE1BQVA7TUFDTCxHQUFBLEdBQVMsQ0FBQyxDQUFDLElBQUYsR0FBUyxFQUFULElBQWUsQ0FBQyxDQUFDLFNBQXBCLEdBQW1DLEdBQW5DLEdBQTRDO01BQ2xELE1BQUEsSUFBVSxFQUFBLENBQUcsQ0FBSCxFQUFLLEdBQUwsRUFoQlg7O0VBTkQ7RUF3QkEsU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBQ1osT0FBQSxHQUFVLFFBQVEsQ0FBQyxjQUFULENBQXdCLFNBQXhCO0VBQ1YsR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLEtBQXhCO0VBQ04sU0FBQSxHQUFZLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCO0VBRVosU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSwyREFBQSxDQUFBLENBQThELEdBQTlELENBQUEsRUFBQSxDQUFBLENBQXNFLFdBQVcsQ0FBQyxHQUFELENBQWpGLENBQUEsSUFBQTtFQUN0QixPQUFPLENBQUMsU0FBUixHQUFvQixXQUFBLEdBQWMsT0FBTyxDQUFDLEdBQUQ7RUFDekMsR0FBRyxDQUFDLFNBQUosR0FBZ0IsS0FBQSxDQUFNLE1BQU47U0FDaEIsU0FBUyxDQUFDLFNBQVYsR0FBc0IsQ0FBQSxDQUFBLENBQUcsSUFBSCxDQUFBLElBQUEsQ0FBQSxDQUFjLENBQWQsQ0FBQSxlQUFBLENBQUEsQ0FBaUMsQ0FBQyxHQUFBLEdBQUksSUFBSixHQUFTLENBQVYsQ0FBWSxDQUFDLE9BQWIsQ0FBcUIsQ0FBckIsQ0FBakMsQ0FBQSxFQUFBO0FBekRiIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUgPSAocykgLT4gXCI8dGFibGU+XFxuXCIgKyBzICsgXCI8L3RhYmxlPlwiXHJcbnRkID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGQgI3thdHRyc30+XCIgKyBzICsgXCI8L3RkPlwiXHJcbnRyID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dHIgI3thdHRyc30+XCIgKyBzICsgXCI8L3RyPlxcblwiXHJcbnRoID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGggI3thdHRyc30+XCIgKyBzICsgXCI8L3RoPlwiXHJcblxyXG50dXJuZXJpbmdhciA9IHtcclxuXHQxNDUwNzogXCJLbGFzcyBNXCIsXHJcblx0MTQ1MDg6IFwiS2xhc3MgMVwiLFxyXG5cdDE0NTA5OiBcIktsYXNzIDJcIixcclxuXHQxNDUxMDogXCJLbGFzcyAzXCIsXHJcblx0MTQ1MTI6IFwiS2xhc3MgNFwiLFxyXG59XHJcblxyXG5wcm9jZXNzID0gKGRhdGFfdCwgZGF0YV9yLCB0aWQsIHBpZCkgLT5cclxuXHJcblx0Y29uc29sZS5sb2cgZGF0YV90XHJcblx0Y29uc29sZS5sb2cgZGF0YV9yXHJcblxyXG5cdHBsYXllcnMgPSB7fVxyXG5cdGZvciBwIGluIGRhdGFfdFxyXG5cdFx0cGkgPSBwLnBsYXllckluZm9cclxuXHRcdHBsYXllcnNbcC5jb250ZW5kZXJJZF0gPSBwaS5lbG8ucmF0aW5nICsgJyAnICsgcGkubGFzdE5hbWUudG9VcHBlckNhc2UoKSArICcgJyArIHBpLmZpcnN0TmFtZVxyXG5cclxuXHRzdGFibGUgPSBcIlwiXHJcblx0c3RhYmxlICs9IHRoIFwiZGF0dW1cIlxyXG5cdHN0YWJsZSArPSB0aCBcInJvbmRcIlxyXG5cdHN0YWJsZSArPSB0aCBcImJvcmRcIlxyXG5cdHN0YWJsZSArPSB0aCBcImbDpHJnXCJcclxuXHRzdGFibGUgKz0gdGggXCJtb3RcIlxyXG5cdHN0YWJsZSArPSB0aCBcInJlc3VsdGF0XCJcclxuXHRzdGFibGUgPSB0ciBzdGFibGVcclxuXHRnb29kID0gMFxyXG5cdG4gPSAwXHJcblx0Y2VudGVyID0gJ3N0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCInXHJcblx0Z3LDpSAgICA9ICdzdHlsZT1cImNvbG9yOiM0NDQ0NDRcIidcclxuXHRub3cgPSBuZXcgRGF0ZSgpXHJcblx0bnUgPSBub3cudG9Mb2NhbGVEYXRlU3RyaW5nIFwic3YtU0VcIlxyXG5cclxuXHRmb3IgciBpbiBkYXRhX3JcclxuXHRcdGcgPSByLmdhbWVzWzBdXHJcblx0XHRpZiByLmZpbmFsaXplZCBcclxuXHRcdFx0biArPSAxXHJcblx0XHRcdGlmIHIuaG9tZVJlc3VsdCAhPSAwIG9yIHIuYXdheVJlc3VsdCAhPSAwIHRoZW4gZ29vZCArPSAxXHJcblx0XHQjIGNvbnNvbGUubG9nIHIuYXdheUlkLHIuaG9tZUlkXHJcblx0XHRpZiByLmF3YXlJZCA9PSBwaWQgb3Igci5ob21lSWQgPT0gcGlkXHJcblx0XHRcdGbDpHJnID0gaWYgci5ob21lSWQ9PXBpZCB0aGVuIFwidml0XCIgZWxzZSBcInN2YXJ0XCJcclxuXHRcdFx0cyA9IFwiXCJcclxuXHRcdFx0cyArPSB0ZCByLmRhdGVcclxuXHRcdFx0cyArPSB0ZCByLnJvdW5kTnIsY2VudGVyXHJcblx0XHRcdHMgKz0gdGQgci5ib2FyZCxjZW50ZXJcclxuXHRcdFx0cyArPSB0ZCBmw6RyZyxjZW50ZXJcclxuXHRcdFx0b3BwID0gaWYgZsOkcmc9PSd2aXQnIHRoZW4gci5hd2F5SWQgZWxzZSByLmhvbWVJZFxyXG5cdFx0XHRyZXMgPSBpZiBmw6RyZz09J3ZpdCcgdGhlbiByLmhvbWVSZXN1bHQgZWxzZSByLmF3YXlSZXN1bHRcclxuXHRcdFx0aWYgb3BwIDwgMTAwMFxyXG5cdFx0XHRcdHMgKz0gdGQgXCJ3Lm8uXCJcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHMgKz0gdGQgcGxheWVyc1tvcHAudG9TdHJpbmcoKV1cclxuXHRcdFx0aWYgZy5yZXN1bHQ9PS0zIHRoZW4gcmVzICs9IFwiIHcuby5cIlxyXG5cdFx0XHRzICs9IHRkIHJlcyxjZW50ZXJcclxuXHRcdFx0Y29sID0gaWYgci5kYXRlIDwgbnUgb3Igci5maW5hbGl6ZWQgdGhlbiBncsOlIGVsc2UgXCJcIlxyXG5cdFx0XHRzdGFibGUgKz0gdHIgcyxjb2xcclxuXHJcblx0dHVybmVyaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3R1cm5lcmluZydcclxuXHRzcGVsYXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3NwZWxhcmUnXHJcblx0YXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2FwcCdcclxuXHRzdGF0aXN0aWsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnc3RhdGlzdGlrJ1xyXG5cclxuXHR0dXJuZXJpbmcuaW5uZXJIVE1MID0gXCI8YSBocmVmPSdodHRwczovL21lbWJlci5zY2hhY2suc2UvU2hvd1RvdXJuYW1lbnRTZXJ2bGV0P2lkPSN7dGlkfSc+I3t0dXJuZXJpbmdhclt0aWRdfTwvYT5cIlxyXG5cdHNwZWxhcmUuaW5uZXJUZXh0ID0gXCJTcGVsYXJlOiBcIiArIHBsYXllcnNbcGlkXVxyXG5cdGFwcC5pbm5lckhUTUwgPSB0YWJsZSBzdGFibGVcclxuXHRzdGF0aXN0aWsuaW5uZXJUZXh0ID0gXCIje2dvb2R9IG9mICN7bn0gZ2FtZXMgcGxheWVkICgjeygxMDAqZ29vZC9uKS50b0ZpeGVkIDF9JSlcIlxyXG4iXX0=
//# sourceURL=c:\github\SrS\content\API\sketch.coffee