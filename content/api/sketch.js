// Generated by CoffeeScript 2.7.0
var process, table, td, th, tr, turneringar;

table = function(s) {
  return `<table>\n${s}</table>`;
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>${s}</tr>\n`;
};

td = function(s, attrs = "") {
  return `<td ${attrs}>${s}</td>`;
};

th = function(s, attrs = "") {
  return `<th ${attrs}>${s}</th>`;
};

turneringar = {
  14507: "Klass M",
  14508: "Klass 1",
  14509: "Klass 2",
  14510: "Klass 3",
  14512: "Klass 4"
};

process = function(data_t, data_r, tid, pid) {
  var app, center, col, finalized, färg, g, grå, i, j, len, len1, n, now, nu, opp, p, pi, played, players, r, ref, ref1, res, s, spelare, stable, statistik, turnering;
  console.log(data_t);
  console.log(data_r);
  players = {};
  for (i = 0, len = data_t.length; i < len; i++) {
    p = data_t[i];
    pi = p.playerInfo;
    players[p.contenderId] = pi.elo.rating + ' ' + pi.lastName.toUpperCase() + ' ' + pi.firstName;
  }
  stable = "";
  stable += th("datum");
  stable += th("rond");
  stable += th("bord");
  stable += th("färg");
  stable += th("mot");
  stable += th("resultat");
  stable = tr(stable);
  played = 0;
  n = data_r.length;
  finalized = 0;
  center = 'style="text-align: center"';
  grå = 'class="old"';
  now = new Date();
  nu = now.toLocaleDateString("sv-SE");
  for (j = 0, len1 = data_r.length; j < len1; j++) {
    r = data_r[j];
    g = r.games[0];
    if (r.finalized) {
      finalized += 1;
      if ((ref = g.result) === (-1) || ref === 0 || ref === 1) {
        played += 1;
      }
    }
    if (r.awayId === pid || r.homeId === pid) {
      färg = r.homeId === pid ? "vit" : "svart";
      s = "";
      s += td(r.date);
      s += td(r.roundNr, center);
      s += td(r.board, center);
      s += td(färg, center);
      opp = färg === 'vit' ? r.awayId : r.homeId;
      res = färg === 'vit' ? r.homeResult : r.awayResult;
      if (opp < 1000) {
        s += td("w.o.");
      } else {
        s += td(players[opp.toString()]);
      }
      if ((ref1 = g.result) === (-3) || ref1 === (-2) || ref1 === 2) {
        res += " w.o.";
      }
      s += td(res, center);
      col = r.date < nu || r.finalized ? grå : "";
      stable += tr(s, col);
    }
  }
  turnering = document.getElementById('turnering');
  spelare = document.getElementById('spelare');
  app = document.getElementById('app');
  statistik = document.getElementById('statistik');
  turnering.innerHTML = `<a href='https://member.schack.se/ShowTournamentServlet?id=${tid}'>${turneringar[tid]}</a>`;
  spelare.innerText = "Spelare: " + players[pid];
  app.innerHTML = table(stable);
  return statistik.innerText = `${played} av ${finalized} partier spelade i turneringen. (${(100 * played / finalized).toFixed(1)}%). Ej ännu spelade: ${n - finalized}`;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcIiwic291cmNlcyI6WyJjb250ZW50XFxBUElcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTs7QUFBQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUFPLENBQUEsU0FBQSxDQUFBLENBQVksQ0FBWixDQUFBLFFBQUE7QUFBUDs7QUFDUixFQUFBLEdBQUssUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsQ0FBZ0IsQ0FBaEIsQ0FBQSxPQUFBO0FBQWhCOztBQUNMLEVBQUEsR0FBSyxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxDQUFnQixDQUFoQixDQUFBLEtBQUE7QUFBaEI7O0FBQ0wsRUFBQSxHQUFLLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQLENBQUEsQ0FBQSxDQUFBLENBQWdCLENBQWhCLENBQUEsS0FBQTtBQUFoQjs7QUFFTCxXQUFBLEdBQWM7RUFDYixLQUFBLEVBQU8sU0FETTtFQUViLEtBQUEsRUFBTyxTQUZNO0VBR2IsS0FBQSxFQUFPLFNBSE07RUFJYixLQUFBLEVBQU8sU0FKTTtFQUtiLEtBQUEsRUFBTztBQUxNOztBQVFkLE9BQUEsR0FBVSxRQUFBLENBQUMsTUFBRCxFQUFTLE1BQVQsRUFBaUIsR0FBakIsRUFBc0IsR0FBdEIsQ0FBQTtBQUVWLE1BQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxF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QUFGLEdBQVMsRUFBVCxJQUFlLENBQUMsQ0FBQyxTQUFwQixHQUFtQyxHQUFuQyxHQUE0QztNQUNsRCxNQUFBLElBQVUsRUFBQSxDQUFHLENBQUgsRUFBSyxHQUFMLEVBaEJYOztFQUxEO0VBdUJBLFNBQUEsR0FBWSxRQUFRLENBQUMsY0FBVCxDQUF3QixXQUF4QjtFQUNaLE9BQUEsR0FBVSxRQUFRLENBQUMsY0FBVCxDQUF3QixTQUF4QjtFQUNWLEdBQUEsR0FBTSxRQUFRLENBQUMsY0FBVCxDQUF3QixLQUF4QjtFQUNOLFNBQUEsR0FBWSxRQUFRLENBQUMsY0FBVCxDQUF3QixXQUF4QjtFQUVaLFNBQVMsQ0FBQyxTQUFWLEdBQXNCLENBQUEsMkRBQUEsQ0FBQSxDQUE4RCxHQUE5RCxDQUFBLEVBQUEsQ0FBQSxDQUFzRSxXQUFXLENBQUMsR0FBRCxDQUFqRixDQUFBLElBQUE7RUFDdEIsT0FBTyxDQUFDLFNBQVIsR0FBb0IsV0FBQSxHQUFjLE9BQU8sQ0FBQyxHQUFEO0VBQ3pDLEdBQUcsQ0FBQyxTQUFKLEdBQWdCLEtBQUEsQ0FBTSxNQUFOO1NBQ2hCLFNBQVMsQ0FBQyxTQUFWLEdBQXNCLENBQUEsQ0FBQSxDQUFHLE1BQUgsQ0FBQSxJQUFBLENBQUEsQ0FBZ0IsU0FBaEIsQ0FBQSxpQ0FBQSxDQUFBLENBQTZELENBQUMsR0FBQSxHQUFJLE1BQUosR0FBVyxTQUFaLENBQXNCLENBQUMsT0FBdkIsQ0FBK0IsQ0FBL0IsQ0FBN0QsQ0FBQSxxQkFBQSxDQUFBLENBQXFILENBQUEsR0FBRSxTQUF2SCxDQUFBO0FBM0RiIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUgPSAocykgLT4gXCI8dGFibGU+XFxuI3tzfTwvdGFibGU+XCJcclxudHIgPSAocyxhdHRycz1cIlwiKSAtPiBcIjx0ciAje2F0dHJzfT4je3N9PC90cj5cXG5cIlxyXG50ZCA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRkICN7YXR0cnN9PiN7c308L3RkPlwiXHJcbnRoID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dGggI3thdHRyc30+I3tzfTwvdGg+XCJcclxuXHJcbnR1cm5lcmluZ2FyID0ge1xyXG5cdDE0NTA3OiBcIktsYXNzIE1cIixcclxuXHQxNDUwODogXCJLbGFzcyAxXCIsXHJcblx0MTQ1MDk6IFwiS2xhc3MgMlwiLFxyXG5cdDE0NTEwOiBcIktsYXNzIDNcIixcclxuXHQxNDUxMjogXCJLbGFzcyA0XCIsXHJcbn1cclxuXHJcbnByb2Nlc3MgPSAoZGF0YV90LCBkYXRhX3IsIHRpZCwgcGlkKSAtPlxyXG5cclxuXHRjb25zb2xlLmxvZyBkYXRhX3RcclxuXHRjb25zb2xlLmxvZyBkYXRhX3JcclxuXHJcblx0cGxheWVycyA9IHt9XHJcblx0Zm9yIHAgaW4gZGF0YV90XHJcblx0XHRwaSA9IHAucGxheWVySW5mb1xyXG5cdFx0cGxheWVyc1twLmNvbnRlbmRlcklkXSA9IHBpLmVsby5yYXRpbmcgKyAnICcgKyBwaS5sYXN0TmFtZS50b1VwcGVyQ2FzZSgpICsgJyAnICsgcGkuZmlyc3ROYW1lXHJcblxyXG5cdHN0YWJsZSA9IFwiXCJcclxuXHRzdGFibGUgKz0gdGggXCJkYXR1bVwiXHJcblx0c3RhYmxlICs9IHRoIFwicm9uZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiYm9yZFwiXHJcblx0c3RhYmxlICs9IHRoIFwiZsOkcmdcIlxyXG5cdHN0YWJsZSArPSB0aCBcIm1vdFwiXHJcblx0c3RhYmxlICs9IHRoIFwicmVzdWx0YXRcIlxyXG5cdHN0YWJsZSA9IHRyIHN0YWJsZVxyXG5cclxuXHRwbGF5ZWQgPSAwXHJcblx0biA9IGRhdGFfci5sZW5ndGhcclxuXHRmaW5hbGl6ZWQgPSAwXHJcblxyXG5cdGNlbnRlciA9ICdzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlclwiJ1xyXG5cdGdyw6UgICAgPSAnY2xhc3M9XCJvbGRcIidcclxuXHRub3cgPSBuZXcgRGF0ZSgpXHJcblx0bnUgPSBub3cudG9Mb2NhbGVEYXRlU3RyaW5nIFwic3YtU0VcIlxyXG5cclxuXHRmb3IgciBpbiBkYXRhX3JcclxuXHRcdGcgPSByLmdhbWVzWzBdXHJcblx0XHRpZiByLmZpbmFsaXplZCBcclxuXHRcdFx0ZmluYWxpemVkICs9IDFcclxuXHRcdFx0aWYgZy5yZXN1bHQgaW4gWy0xLDAsMV0gdGhlbiBwbGF5ZWQgKz0gMVxyXG5cdFx0aWYgci5hd2F5SWQgPT0gcGlkIG9yIHIuaG9tZUlkID09IHBpZFxyXG5cdFx0XHRmw6RyZyA9IGlmIHIuaG9tZUlkPT1waWQgdGhlbiBcInZpdFwiIGVsc2UgXCJzdmFydFwiXHJcblx0XHRcdHMgPSBcIlwiXHJcblx0XHRcdHMgKz0gdGQgci5kYXRlXHJcblx0XHRcdHMgKz0gdGQgci5yb3VuZE5yLGNlbnRlclxyXG5cdFx0XHRzICs9IHRkIHIuYm9hcmQsY2VudGVyXHJcblx0XHRcdHMgKz0gdGQgZsOkcmcsY2VudGVyXHJcblx0XHRcdG9wcCA9IGlmIGbDpHJnPT0ndml0JyB0aGVuIHIuYXdheUlkIGVsc2Ugci5ob21lSWRcclxuXHRcdFx0cmVzID0gaWYgZsOkcmc9PSd2aXQnIHRoZW4gci5ob21lUmVzdWx0IGVsc2Ugci5hd2F5UmVzdWx0XHJcblx0XHRcdGlmIG9wcCA8IDEwMDBcclxuXHRcdFx0XHRzICs9IHRkIFwidy5vLlwiXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRzICs9IHRkIHBsYXllcnNbb3BwLnRvU3RyaW5nKCldXHJcblx0XHRcdGlmIGcucmVzdWx0IGluIFstMywtMiwyXSB0aGVuIHJlcyArPSBcIiB3Lm8uXCJcclxuXHRcdFx0cyArPSB0ZCByZXMsY2VudGVyXHJcblx0XHRcdGNvbCA9IGlmIHIuZGF0ZSA8IG51IG9yIHIuZmluYWxpemVkIHRoZW4gZ3LDpSBlbHNlIFwiXCJcclxuXHRcdFx0c3RhYmxlICs9IHRyIHMsY29sXHJcblxyXG5cdHR1cm5lcmluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICd0dXJuZXJpbmcnXHJcblx0c3BlbGFyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdzcGVsYXJlJ1xyXG5cdGFwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdhcHAnXHJcblx0c3RhdGlzdGlrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3N0YXRpc3RpaydcclxuXHJcblx0dHVybmVyaW5nLmlubmVySFRNTCA9IFwiPGEgaHJlZj0naHR0cHM6Ly9tZW1iZXIuc2NoYWNrLnNlL1Nob3dUb3VybmFtZW50U2VydmxldD9pZD0je3RpZH0nPiN7dHVybmVyaW5nYXJbdGlkXX08L2E+XCJcclxuXHRzcGVsYXJlLmlubmVyVGV4dCA9IFwiU3BlbGFyZTogXCIgKyBwbGF5ZXJzW3BpZF1cclxuXHRhcHAuaW5uZXJIVE1MID0gdGFibGUgc3RhYmxlXHJcblx0c3RhdGlzdGlrLmlubmVyVGV4dCA9IFwiI3twbGF5ZWR9IGF2ICN7ZmluYWxpemVkfSBwYXJ0aWVyIHNwZWxhZGUgaSB0dXJuZXJpbmdlbi4gKCN7KDEwMCpwbGF5ZWQvZmluYWxpemVkKS50b0ZpeGVkIDF9JSkuIEVqIMOkbm51IHNwZWxhZGU6ICN7bi1maW5hbGl6ZWR9XCJcclxuIl19
//# sourceURL=c:\github\SrS\content\API\sketch.coffee